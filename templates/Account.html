<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="../static/css/Account.css" />
    <link rel="stylesheet" href="../static/css/File_card.css" />
    <link rel="stylesheet" href="../static/css/Head_style.css" />
    {% if menu == 'big' %}
    <link rel="stylesheet" href="../static/css/Big_left_menu.css" />
    {% else %}
    <link rel="stylesheet" href="../static/css/Small_left_menu.css" />
    {% endif %}
    <title>–ë—Ä–æ–º–Ω–∏—Ü–∞</title>
  </head>
  <body>
    <div class="HEAD">
      <div class="container head">
        <div class="logo-block">
          <div class="logo"></div>
          <div class="logo-text">–ë—Ä–æ–º–Ω–∏—Ü–∞</div>
        </div>
        <div class="user-block">
          <div class="user-photo"></div>
          <div class="user-list">
            <ul>
              <li class="menu">
                –ú–µ–Ω—é
                <ul class="menu-list">
                  <li class="menu-el"><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                  <li class="menu-el">
                    <a href="/publications">–ü—É–±–ª–∏–∫–∞—Ü–∏–∏</a>
                  </li>
                  <li class="menu-el"><a href="/settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
                  <li class="menu-el last-el">
                    <a href="/logout">–í—ã—Ö–æ–¥</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <section class="page">
      <div class="cloud container">
        {% if menu == 'big' %}
        <div class="left-menu Block1">
          <div class="menu-container">
            <div class="up-menu">
              <div class="user-block-on-menu">
                <div class="main-user-photo"></div>
                <div class="username-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
              </div>
              <div class="small-block">
                <form method="POST">
                  <input name="change-menu" class="none" />
                  <input type="submit" value="<" class="user-button" />
                </form>
              </div>
            </div>
            <div class="search-block">
              <form method="POST">
                <div class="search-row">
                  <input
                    type="search"
                    placeholder="–ü–æ–∏—Å–∫..."
                    class="search-string"
                    size="1"
                  />
                  <input type="submit" value="üîç" class="user-button" />
                </div>
              </form>
              <form method="POST">
                <div class="sort-placeholder">
                  <label class="sort-caption">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:</label>
                  <select class="sort-selector">
                    <option class="sort-option">–ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è</option>
                    <option class="sort-option">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                  </select>
                  <div class="checkbox-placeholder">
                    <input type="checkbox" class="custom-checkbox" />
                    <label class="check-text">–í –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ</label>
                  </div>
                  <input
                    type="submit"
                    value="–ü—Ä–∏–º–µ–Ω–∏—Ç—å"
                    class="user-button sort-button"
                  />
                </div>
              </form>
            </div>
          </div>
          <div class="menu-container">
            <div class="add-block">
              <a class="add-button" href="/add_dir">+</a>
              <label class="add-text">–î–æ–±–∞–≤–∏—Ç—å –ø–∞–ø–∫—É</label>
            </div>
            <form method="POST">
              <div class="add-block">
                <div class="input__placeholder">
                  <input
                    name="file"
                    type="file"
                    name="file"
                    id="input__file"
                    class="input input__file"
                    multiple
                  />
                  <label for="input__file" class="input__file-button add-block">
                    <span class="add-button">+</span>
                    <span class="add-text input__file-button-text"
                      >–î–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã</span
                    >
                    <input type="submit" class="submit-file-button" value="‚úì" />
                  </label>
                </div>
              </div>
            </form>
          </div>
        </div>
        {% else %}
        <div class="left-menu Block1">
          <div class="small-menu-block">
            <form method="POST">
              <input name="change-menu" class="none" />
              <input
                type="submit"
                value=">"
                class="user-button small-menu-button"
              />
            </form>
          </div>
          <div class="small-menu-block">
            <form method="POST">
              <input name="paste-files" class="none" />
              <input
                type="submit"
                value="‚éÄ"
                class="user-button small-menu-button"
              />
            </form>
          </div>
        </div>
        {% endif %}
        <div class="dirs-placeholder Block1">
          {% for way in files_names %}
          <div class="file-card">
            <div class="file-card-main">
              <div class="file-card-prevision"></div>
              <div class="file-card-title">{{ way.split('/')[-1] }}</div>
            </div>
            <div class="file-card-functions">
              <div class="file-card-user-list">
                <ul class="file-card-user-list-el">
                  <li class="file-card-menu">
                    ‚ñº
                    <ul class="file-card-menu-list">
                      <div class="file-card-menu-el-place">
                        <a
                          class="file-card-menu-el"
                          href="/files/public/{{ way }}"
                          >–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</a
                        >
                      </div>
                      <div class="file-card-menu-el-place">
                        <a
                          class="file-card-menu-el"
                          href="/files/rename/{{ way }}"
                          >–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</a
                        >
                      </div>
                      <div class="file-card-menu-el-place">
                        <form method="POST">
                          <input name="cut-file-{{ way }}" class="none" />
                          <input
                            type="submit"
                            value="–í—ã—Ä–µ–∑–∞—Ç—å"
                            class="file-card-menu-el"
                          />
                        </form>
                      </div>
                      <div
                        class="file-card-menu-el-place file-card-menu-last-el-place"
                      >
                        <form method="POST">
                          <input name="del-file-{{ way }}" class="none" />
                          <input
                            type="submit"
                            value="–£–¥–∞–ª–∏—Ç—å"
                            class="file-card-menu-el"
                          />
                        </form>
                      </div>
                    </ul>
                  </li>
                </ul>
              </div>
              <div><a class="download-button" href="/{{ way }}" download="">‚Üì</a></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
    <script>
      let inputs = document.querySelectorAll(".input__file");
      Array.prototype.forEach.call(inputs, function (input) {
        let label = input.nextElementSibling,
          labelVal = label.querySelector(".input__file-button-text").innerText;

        input.addEventListener("change", function (e) {
          let countFiles = "";
          if (this.files && this.files.length >= 1)
            countFiles = this.files.length;

          if (countFiles)
            label.querySelector(".input__file-button-text").innerText =
              "–í—ã–±—Ä–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: " + countFiles;
          else
            label.querySelector(".input__file-button-text").innerText =
              labelVal;
        });
      });
    </script>
  </body>
</html>

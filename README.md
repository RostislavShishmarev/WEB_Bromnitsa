<table bordercolor="none">
  <tr>
    <td>
      <img src="https://thumb.cloud.mail.ru/weblink/thumb/xw1/iRY5/JgsxxQzMm" alt="Логотип" width="75" height="75" />
    </td>
    <td>
      <h1>Облачное хранилище "WEB-Бромница"</h1>
    </td>
  </tr>
</table>

## _Проект для Яндекс Лицея по модулю WEB_

![Облако](https://thumb.cloud.mail.ru/weblink/thumb/xw1/Nt7b/cX6nXPMCX)

### Суть
WEB-Бромница – адаптивный сайт облачного хранилища, продолжение аналогичного [приложения для ПК](https://github.com/RostislavShishmarev/Gallery_Bromnitsa). В отличие от него, WEB-версия сама хранит файлы любых типов на диске, предоставляя возможность сделать некоторые публичными.
Она наследует функции всем знакомого проводника, но при этом освобождает компьютер от нагрузки и отображает графические и аудио файлы сразу на странице.

Переход по страницам осуществляется с помощью меню в правом верхнем углу сайта: облако, публикации, настройки. Там же доступны авторизация, регистрация и выход.

На странице облака слева сверху стрелкой ">" открывается боковое меню. Оно позволяет добавить файлы или создать директорию, найти нужные файлы и задать параметры поиска (единые для всех папок). К малому меню можно вернуться стрелкой "<".
На малом меню есть ещё две функции: переход в родительскую папку ".." и вставка из буфера обмена "⎀".

На каждой карточке файла и директории есть стрелка, наведение на которую открывает меню. С его помощью элементы можно копировать, вырезать, переименовывать и удалять. У файлов присутствует функция "Опубликовать", которая перемещает на страницу создания публикации.

Переходить по группам файлов и публикаций можно полупрозрачными стрелками сверху (разделение на группы нужно для ускорения работы).

Для доступа к большинству функций нужна авторизация, но публикации доступны всем.

![Главная страница](https://thumb.cloud.mail.ru/weblink/thumb/xw1/Lzyo/dMymBMtDZ)

### Сборка
1. Загрузить последний релиз и файл Game_no_code_files.zip
2. Перенести содержимое релиза в свободную папку
3. Перенести папку db в api, папки users и img и файл favicon.ico в static
4. Установить зависимости (для обоих файлов):
```sh
pip install -r requirements.txt
```
5. Запустить файл api/main_api.py
6. Запустить файл main.py

Примечание: директория api — полностью самостоятельный модуль. main.py из неё нужен только файл api/secret_keys.txt, который api/main_api.py создаёт при каждом запуске, а main.py — удаляет.

### Код

Сайт создан при помощи библиотеки Flask. Также были использованы его расширения: Flask-WTF для форм, Flask-login для авторизации. В модуле api — Flask-RESTful.
Во фронтенде почти не использовался JavaScript: большинство кнопок — это ссылки и скрытые формы. Код принимает POST-запрос и по названию скрытой части формы определяет, какая именно его отправила.
Пример скрытой формы:

HTML
```html
<div class="nav-block">
    <form method="POST">
        <!-- next — название скрытой части формы -->
        <input
            name="next" 
            class="none"/>
        <input
            type="submit"
            value=">"
            class="nav-button"/>
    </form>
</div>
```
CSS
```css
.none {
  display: none;
}
```

### Хостинг
Оба сервера WEB-Бромницы расположены на хостинге [pythonanywhere.com](https://pythonanywhere.com).

Адрес сайта: [bromnitsa.pythonanywhere.com](https://bromnitsa.pythonanywhere.com).

### Дополнительно
Все изображения созданы авторами проекта или взяты из свободных интернет-ресурсов.
